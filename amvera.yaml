# amvera.yaml - конфигурация для Amvera Cloud
version: "2.0"

services:
  web:
    # Порт контейнера (указываем 8000, так как Django слушает на 8000)
    containerPort: 8000
    
    # Переменные окружения
    environment:
      DEBUG: "False"
      SECRET_KEY: "${SECRET_KEY}"
      DB_NAME: "${DB_NAME}"
      DB_USER: "${DB_USER}"
      DB_PASSWORD: "${DB_PASSWORD}"
      DB_HOST: "${DB_HOST}"
      DB_PORT: "${DB_PORT}"
      ALLOWED_HOSTS: "${ALLOWED_HOSTS}"
    
    # Health check для проверки работы приложения
    healthCheck:
      enabled: true
      path: "/"
      port: 8000
      initialDelay: 30
      period: 10
      timeout: 5
      retries: 3
    
    # Ресурсы (можно настроить по необходимости)
    resources:
      cpu: 500m
      memory: 512Mi